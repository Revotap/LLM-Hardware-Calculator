<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>LLM Hardware Calculator</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>

<header>
  <h1>LLM Hardware Calculator</h1>
  <p id="headerSub"></p>
  <div class="lang-switch">
    <button id="langEn" class="active" onclick="setLang('en')">EN</button>
    <button id="langDe" onclick="setLang('de')">DE</button>
  </div>
</header>

<div class="container">
  <!-- Input Panel -->
  <div class="panel">
    <h2 id="h2Config"></h2>

    <div class="hf-search-wrapper">
      <span class="search-icon">&#128269;</span>
      <input type="text" id="hfSearch" data-i18n-placeholder="hf_search_placeholder" autocomplete="off">
      <div class="search-spinner" id="hfSpinner"></div>
      <div class="hf-dropdown" id="hfDropdown"></div>
    </div>

    <div class="presets" id="presetBar">
      <button onclick="loadPreset('llama7b',this)">LLaMA 7B</button>
      <button onclick="loadPreset('llama13b',this)">LLaMA 13B</button>
      <button onclick="loadPreset('llama70b',this)">LLaMA 70B</button>
      <button onclick="loadPreset('mistral7b',this)">Mistral 7B</button>
      <button onclick="loadPreset('mixtral',this)">Mixtral 8x7B</button>
      <button onclick="loadPreset('gpt3',this)">GPT-3 175B</button>
      <button onclick="loadPreset('phi2',this)">Phi-2 2.7B</button>
      <button onclick="loadPreset('qwen72b',this)">Qwen 72B</button>
    </div>

    <div class="section">
      <div class="section-title" data-i18n="sec_arch"></div>

      <div class="field">
        <label><span data-i18n="lbl_params"></span> <span class="hint" id="paramHint">7.0B</span></label>
        <div class="slider-row">
          <input type="range" id="params" min="0.1" max="500" step="0.1" value="7">
          <input type="number" id="paramsNum" min="0.1" max="500" step="0.1" value="7" style="width:5rem">
        </div>
      </div>

      <div class="field">
        <label>Hidden Size <span class="hint" id="hiddenHint">4096</span></label>
        <div class="slider-row">
          <input type="range" id="hidden" min="256" max="16384" step="128" value="4096">
          <input type="number" id="hiddenNum" min="256" max="16384" step="1" value="4096" style="width:5rem">
        </div>
      </div>

      <div class="field">
        <label><span data-i18n="lbl_layers"></span> <span class="hint" id="layerHint">32</span></label>
        <div class="slider-row">
          <input type="range" id="layers" min="1" max="128" step="1" value="32">
          <input type="number" id="layersNum" min="1" max="128" step="1" value="32" style="width:5rem">
        </div>
      </div>

      <div class="field">
        <label><span data-i18n="lbl_heads"></span> <span class="hint" id="headsHint">32</span></label>
        <div class="slider-row">
          <input type="range" id="heads" min="1" max="128" step="1" value="32">
          <input type="number" id="headsNum" min="1" max="128" step="1" value="32" style="width:5rem">
        </div>
      </div>

      <div class="field">
        <label><span data-i18n="lbl_kvheads"></span> <span class="hint" id="kvHeadsHint">32</span></label>
        <div class="slider-row">
          <input type="range" id="kvHeads" min="1" max="128" step="1" value="32">
          <input type="number" id="kvHeadsNum" min="1" max="128" step="1" value="32" style="width:5rem">
        </div>
      </div>

      <div class="field">
        <label data-i18n="lbl_attn_type"></label>
        <select id="attnType" onchange="onAttnChange()">
          <option value="mha">Multi-Head Attention (MHA)</option>
          <option value="gqa">Grouped-Query Attention (GQA)</option>
          <option value="mqa">Multi-Query Attention (MQA)</option>
        </select>
      </div>
    </div>

    <div class="section">
      <div class="section-title" data-i18n="sec_precision"></div>

      <div class="field">
        <label data-i18n="lbl_weight_type"></label>
        <select id="weightType">
          <option value="32">FP32 (32 bit)</option>
          <option value="16" selected>FP16 / BF16 (16 bit)</option>
          <option value="8">FP8 (8 bit)</option>
        </select>
      </div>

      <div class="field">
        <label data-i18n="lbl_quant"></label>
        <select id="quantType">
          <option value="none" data-i18n-opt="quant_none"></option>
          <option value="int8">INT8 (8 bit)</option>
          <option value="int4">INT4 (4 bit)</option>
          <option value="gptq4">GPTQ 4-bit</option>
          <option value="gptq3">GPTQ 3-bit</option>
          <option value="awq4">AWQ 4-bit</option>
          <option value="ggml_q8">GGUF Q8_0</option>
          <option value="ggml_q6">GGUF Q6_K</option>
          <option value="ggml_q5">GGUF Q5_K_M</option>
          <option value="ggml_q4">GGUF Q4_K_M</option>
          <option value="ggml_q3">GGUF Q3_K_M</option>
          <option value="ggml_q2">GGUF Q2_K</option>
        </select>
      </div>
    </div>

    <div class="section">
      <div class="section-title" data-i18n="sec_context"></div>

      <div class="field">
        <label><span data-i18n="lbl_ctx"></span> <span class="hint" id="ctxHint">4 096</span></label>
        <div class="slider-row">
          <input type="range" id="context" min="512" max="131072" step="512" value="4096">
          <input type="number" id="contextNum" min="128" max="131072" step="1" value="4096" style="width:6rem">
        </div>
      </div>

      <div class="field">
        <label>Batch Size <span class="hint" id="batchHint">1</span></label>
        <div class="slider-row">
          <input type="range" id="batch" min="1" max="128" step="1" value="1">
          <input type="number" id="batchNum" min="1" max="128" step="1" value="1" style="width:5rem">
        </div>
      </div>

      <div class="field">
        <label data-i18n="lbl_kv_prec"></label>
        <select id="kvPrec">
          <option value="16" selected>FP16 (16 bit)</option>
          <option value="8">INT8 (8 bit)</option>
          <option value="4">INT4 (4 bit)</option>
        </select>
      </div>
    </div>

    <div class="section">
      <div class="section-title">Multi-GPU</div>

      <div class="field">
        <label><span data-i18n="lbl_gpu_count"></span> <span class="hint" id="gpuCountHint">1</span></label>
        <div class="slider-row">
          <input type="range" id="gpuCount" min="1" max="8" step="1" value="1">
          <input type="number" id="gpuCountNum" min="1" max="8" step="1" value="1" style="width:5rem">
        </div>
      </div>

      <div class="field">
        <label data-i18n="lbl_parallel"></label>
        <select id="parallelism">
          <option value="tensor">Tensor Parallelism</option>
          <option value="pipeline">Pipeline Parallelism</option>
        </select>
      </div>
    </div>

    <div class="section">
      <div class="section-title" data-i18n="sec_misc"></div>

      <div class="field">
        <label><span data-i18n="lbl_overhead"></span> <span class="hint" id="overheadHint">20%</span></label>
        <div class="slider-row">
          <input type="range" id="overhead" min="0" max="50" step="1" value="20">
          <span class="val" id="overheadVal">20%</span>
        </div>
      </div>

      <div class="field">
        <label data-i18n="lbl_mode"></label>
        <select id="mode">
          <option value="inference" data-i18n-opt="mode_inference"></option>
          <option value="training" data-i18n-opt="mode_training"></option>
          <option value="lora" data-i18n-opt="mode_lora"></option>
        </select>
      </div>
    </div>

    <div class="section lora-section" id="loraSection">
      <div class="section-title" data-i18n="sec_lora"></div>

      <div class="field">
        <label>LoRA Rank (r) <span class="hint" id="loraRankHint">16</span></label>
        <div class="slider-row">
          <input type="range" id="loraRank" min="1" max="256" step="1" value="16">
          <input type="number" id="loraRankNum" min="1" max="256" step="1" value="16" style="width:5rem">
        </div>
      </div>

      <div class="field">
        <label data-i18n="lbl_lora_targets"></label>
        <select id="loraTargets">
          <option value="qv" data-i18n-opt="lora_qv"></option>
          <option value="qkv" data-i18n-opt="lora_qkv"></option>
          <option value="qkvo" selected data-i18n-opt="lora_qkvo"></option>
          <option value="all" data-i18n-opt="lora_all"></option>
        </select>
      </div>
    </div>
  </div>

  <!-- Results Panel -->
  <div class="panel results">
    <h2 id="h2Results"></h2>

    <div class="warn-banner" id="warnBanner"></div>

    <div class="info-banner" id="modeBanner"></div>

    <div class="result-card highlight">
      <h3 data-i18n="res_total_vram"></h3>
      <div class="value accent" id="totalVram" aria-live="polite">0 GB</div>
      <div class="sub" id="totalVramSub"></div>
      <div class="multi-gpu-info" id="multiGpuInfo" style="display:none;"></div>
    </div>

    <div class="result-card">
      <h3 data-i18n="res_weights"></h3>
      <div class="value accent2" id="weightMem">0 GB</div>
      <div class="sub" id="weightMemSub"></div>
    </div>

    <div class="result-card">
      <h3>KV-Cache</h3>
      <div class="value accent2" id="kvMem">0 GB</div>
      <div class="sub" id="kvMemSub"></div>
    </div>

    <div class="result-card">
      <h3 data-i18n="res_act_overhead"></h3>
      <div class="value accent2" id="overheadMem">0 GB</div>
    </div>

    <div class="result-card" id="trainingCard" style="display:none;">
      <h3 data-i18n="res_train_extra"></h3>
      <div class="value warn" id="trainMem">0 GB</div>
      <div class="sub" id="trainMemSub"></div>
    </div>

    <div class="result-card">
      <h3 data-i18n="res_breakdown"></h3>
      <div class="breakdown" id="breakdown"></div>
    </div>

    <div class="result-card">
      <h3 data-i18n="res_gpu_rec"></h3>
      <div class="gpu-rec" id="gpuRec"></div>
    </div>
  </div>
</div>

<script src="script.js"></script>

</body>
</html>
